"use strict";(self.webpackChunkdndocs=self.webpackChunkdndocs||[]).push([[3166],{576:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>t,metadata:()=>c,toc:()=>d});var s=n(5893),o=n(1151);const t={sidebar_position:4},i="R\xe9cup\xe9rer les services",c={id:"For developpers/Addon/GetServices",title:"R\xe9cup\xe9rer les services",description:"D'abord r\xe9cup\xe9rons le bundle de ce dit service",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/For developpers/Addon/GetServices.mdx",sourceDirName:"For developpers/Addon",slug:"/For developpers/Addon/GetServices",permalink:"/DreamNetwork-DocumentationV2/fr/docs/For developpers/Addon/GetServices",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/For developpers/Addon/GetServices.mdx",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Commandes",permalink:"/DreamNetwork-DocumentationV2/fr/docs/For developpers/Addon/Commands"},next:{title:"Messaging",permalink:"/DreamNetwork-DocumentationV2/fr/docs/For developpers/Addon/Messaging"}},l={},d=[{value:"D&#39;abord r\xe9cup\xe9rons le bundle de ce dit service",id:"dabord-r\xe9cup\xe9rons-le-bundle-de-ce-dit-service",level:2},{value:"Il existe plusieurs fa\xe7on de r\xe9cup\xe9rer un service,",id:"il-existe-plusieurs-fa\xe7on-de-r\xe9cup\xe9rer-un-service",level:4},{value:"M\xe9thode 1 : R\xe9cup\xe9rer le service en appelant le bundle",id:"m\xe9thode-1--r\xe9cup\xe9rer-le-service-en-appelant-le-bundle",level:2},{value:"M\xe9thode 2 : R\xe9cup\xe9rer directement l&#39;\xe9x\xe9cuteur directement",id:"m\xe9thode-2--r\xe9cup\xe9rer-directement-l\xe9x\xe9cuteur-directement",level:2},{value:"M\xe9thode 3 : R\xe9cup\xe9rer le service directement",id:"m\xe9thode-3--r\xe9cup\xe9rer-le-service-directement",level:2},{value:"Nous avons maintenant l&#39;\xe9x\xe9cuteur et le service, nous pouvons donc voir les m\xe9thodes disponibles",id:"nous-avons-maintenant-l\xe9x\xe9cuteur-et-le-service-nous-pouvons-donc-voir-les-m\xe9thodes-disponibles",level:2},{value:"Start un service",id:"start-un-service",level:3},{value:"Maintenant voyons les m\xe9thodes disponibles pour les services",id:"maintenant-voyons-les-m\xe9thodes-disponibles-pour-les-services",level:2},{value:"Stop un service",id:"stop-un-service",level:3},{value:"Red\xe9marrer un service",id:"red\xe9marrer-un-service",level:3},{value:"Tuer un service",id:"tuer-un-service",level:3}];function a(e){const r={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",p:"p",pre:"pre",...(0,o.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.h1,{id:"r\xe9cup\xe9rer-les-services",children:"R\xe9cup\xe9rer les services"}),"\n",(0,s.jsx)(r.h2,{id:"dabord-r\xe9cup\xe9rons-le-bundle-de-ce-dit-service",children:"D'abord r\xe9cup\xe9rons le bundle de ce dit service"}),"\n",(0,s.jsx)(r.h4,{id:"il-existe-plusieurs-fa\xe7on-de-r\xe9cup\xe9rer-un-service",children:"Il existe plusieurs fa\xe7on de r\xe9cup\xe9rer un service,"}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.h2,{id:"m\xe9thode-1--r\xe9cup\xe9rer-le-service-en-appelant-le-bundle",children:"M\xe9thode 1 : R\xe9cup\xe9rer le service en appelant le bundle"}),"\n"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:'// get the lobby service\n BundleData mainBundle  = DNCoreAPI.getInstance().getBundleManager().getBundleData("main");\n IExecutor lobbies = mainBundle.getExecutors().get("lobby");\n IService lobby = lobbies.getService(1);\n'})}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.h2,{id:"m\xe9thode-2--r\xe9cup\xe9rer-directement-l\xe9x\xe9cuteur-directement",children:"M\xe9thode 2 : R\xe9cup\xe9rer directement l'\xe9x\xe9cuteur directement"}),"\n"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:' // more simple way to get the lobbies executor\n IExecutor lobbies = DNCoreAPI.getInstance().getContainer().getJVMExecutor("lobby", "main");\n IService lobby = lobbies.getService(1);\n'})}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.h2,{id:"m\xe9thode-3--r\xe9cup\xe9rer-le-service-directement",children:"M\xe9thode 3 : R\xe9cup\xe9rer le service directement"}),"\n"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:'//more simple way to get the lobby service\nIService lobby = DNCoreAPI.getInstance().getContainer().tryToGetService("main/lobby-1").orElse(null);\n// or\nDNCoreAPI.getInstance().getContainer().tryToGetService("lobby-1").ifPresent(lobby -> {\n// do my code\n});\n'})}),"\n",(0,s.jsx)(r.h2,{id:"nous-avons-maintenant-l\xe9x\xe9cuteur-et-le-service-nous-pouvons-donc-voir-les-m\xe9thodes-disponibles",children:"Nous avons maintenant l'\xe9x\xe9cuteur et le service, nous pouvons donc voir les m\xe9thodes disponibles"}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.h3,{id:"start-un-service",children:"Start un service"}),"\n"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:"    lobbies.startService();\n"})}),"\n",(0,s.jsx)(r.p,{children:"Mais il est possible de pouvoir d\xe9marrer un service avec des param\xe8tres"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:'     lobbies.startService(IStartupConfig.builder()\n                            .xms("512M")\n                            .xmx("1024M")\n                            .startup("%java% -jar %exec%") // custom startup\n                            .type(IExecutor.Mods.DYNAMIC)\n                            .build()\n                    );\n'})}),"\n",(0,s.jsx)(r.p,{children:"Vous croyez que c'est fini ?\nIl est possible de pouvoir savoir lorsque le service en question s'est bien d\xe9marr\xe9 ou non"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:"  lobbies.startServer().whenStart(iService -> {\n                        // do something when the server is started\n                    }).whenConnect((iService, aServiceClient) -> {\n                        // do something when a client is connected to the server\n                    }).whenFail(() -> {\n                        // do something when the server is failed\n                    });\n"})}),"\n",(0,s.jsx)(r.p,{children:"Vous pouvez faire encore d'autres choses avec les \xe9x\xe9cuteurs mais je vous laisse d\xe9couvrir par vous m\xeame"}),"\n",(0,s.jsx)(r.h2,{id:"maintenant-voyons-les-m\xe9thodes-disponibles-pour-les-services",children:"Maintenant voyons les m\xe9thodes disponibles pour les services"}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.h3,{id:"stop-un-service",children:"Stop un service"}),"\n"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:"    lobby.stop();\n"})}),"\n",(0,s.jsx)(r.p,{children:"Vous pouvez savoir quand le serveur c'est bien stop via son CompletableFuture"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:"    lobby.stop().whenComplete((aBoolean, throwable) -> {\n                        // do something when the server is stopped\n                    });\n"})}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.h3,{id:"red\xe9marrer-un-service",children:"Red\xe9marrer un service"}),"\n"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:"    lobby.restart().whenComplete((aBoolean, throwable) -> {\n                        // do something when the server is stopped\n                    });;\n"})}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.h3,{id:"tuer-un-service",children:"Tuer un service"}),"\n"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:"    lobby.kill();\n"})}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"Vous pouvez r\xe9cup\xe9rer toutes les propri\xe9t\xe9s que peut avoir un service dont la ram, le port utilis\xe9, son nom, son nom visible par le proxy, son mode, etc..."}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:"Mais le plus important que nous allons voir juste apr\xe8s cette page... C'est de savoir comment r\xe9cup\xe9rer le client d'un service et comment lui envoyer des donn\xe9es"})]})}function u(e={}){const{wrapper:r}={...(0,o.a)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},1151:(e,r,n)=>{n.d(r,{Z:()=>c,a:()=>i});var s=n(7294);const o={},t=s.createContext(o);function i(e){const r=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),s.createElement(t.Provider,{value:r},e.children)}}}]);